{
  "id": "/dask-distributed-jupyter",
  "apps": [
    {
      "id": "/dask-distributed-jupyter/dask-scheduler",
      "instances": 1,
      "cpus": 1,
      "mem": 1024,
      "cmd": "bash -c '(start-dask-scheduler.sh &) && sleep 5 && notebook.sh'",
      "env": {
        "HOME": "/home/conda"
      },
      "labels": {
        "MARATHON_SINGLE_INSTANCE_APP": "true",
        "HAPROXY_GROUP": "external",
        "HAPROXY_0_ENABLED": "true",
        "HAPROXY_0_VHOST": "vhost.example.com",
        "HAPROXY_0_PATH": "/dask-distributed-jupyter"
      },
      "container": {
        "type": "MESOS",
        "docker": {
          "image": "vishnumohan/dask-distributed-dcos",
          "forcePullImage": true
        }
      },
      "portDefinitions": [
        {
          "protocol": "tcp",
          "port": 0,
          "labels": {
            "VIP_0": "/dask-distributed-jupyter.dask-scheduler:8888"
          },
          "name": "jupyter-notebook"
        },
        {
          "protocol": "tcp",
          "port": 0,
          "labels": {
            "VIP_1": "/dask-distributed-jupyter.dask-scheduler:8786"
          },
          "name": "dask-scheduler"
        },
        {
          "protocol": "tcp",
          "port": 0,
          "labels": {
            "VIP_2": "/dask-distributed-jupyter.dask-scheduler:9786"
          },
          "name": "dask-scheduler-http"
        },
        {
          "protocol": "tcp",
          "port": 0,
          "labels": {
            "VIP_3": "/dask-distributed-jupyter.dask-scheduler:8787"
          },
          "name": "dask-scheduler-bokeh"
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0,
        "maximumOverCapacity": 0
      },
      "healthChecks": [
        {
          "portIndex": 0,
          "protocol": "MESOS_HTTP",
          "path": "/api",
          "gracePeriodSeconds": 30,
          "intervalSeconds": 20,
          "timeoutSeconds": 10,
          "maxConsecutiveFailures": 3
        }
      ]
    },
    {
      "id": "/dask-distributed-jupyter/dask-worker",
      "instances": 1,
      "cpus": 1,
      "mem": 8192,
      "cmd": "bash -c '(notebook.sh &) && sleep 5 && start-dask-worker.sh'",
      "env": {
        "HOME": "/home/conda"
      },
      "container": {
        "type": "MESOS",
        "docker": {
          "image": "vishnumohan/dask-distributed-dcos",
          "forcePullImage": true
        }
      },
      "portDefinitions": [
        {
          "protocol": "tcp",
          "port": 0,
          "name": "jupyter-notebook"
        },
        {
          "protocol": "tcp",
          "port": 0,
          "name": "dask-worker"
        },
        {
          "protocol": "tcp",
          "port": 0,
          "name": "dask-worker-http"
        },
        {
          "protocol": "tcp",
          "port": 0,
          "name": "dask-worker-nanny"
        }
      ],
      "healthChecks": [
        {
          "portIndex": 2,
          "protocol": "MESOS_HTTP",
          "path": "/info.json",
          "gracePeriodSeconds": 30,
          "intervalSeconds": 20,
          "timeoutSeconds": 10,
          "maxConsecutiveFailures": 3
        }
      ],
      "dependencies": [
        "/dask-distributed-jupyter/dask-scheduler"
      ]
    }
  ]
}
